{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"D:/task159/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/task159/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/task159/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{sumBy}from'lodash';import{useAppDispatch}from'state';import{Card,CardBody,CardHeader,Flex,Heading,PrizeIcon}from'@pancakeswap-libs/uikit';import{useWallet}from'@binance-chain/bsc-use-wallet';import{useProfile}from'state/hooks';import{addPoints}from'state/profile';import{addAchievement}from'state/achievements';import useI18n from'hooks/useI18n';import{getClaimableIfoData}from'utils/achievements';import AchievementRow from'./AchievementRow';var ClaimPointsCallout=function ClaimPointsCallout(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),claimableAchievements=_useState2[0],setClaimableAchievement=_useState2[1];var TranslateString=useI18n();var dispatch=useAppDispatch();var _useProfile=useProfile(),profile=_useProfile.profile;var _useWallet=useWallet(),account=_useWallet.account;useEffect(function(){var fetchIfoClaims=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var ifoData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getClaimableIfoData(account);case 2:ifoData=_context.sent;setClaimableAchievement(ifoData);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchIfoClaims(){return _ref.apply(this,arguments);};}();if(account){fetchIfoClaims();}},[account,dispatch,setClaimableAchievement]);var handleCollectSuccess=function handleCollectSuccess(achievement){dispatch(addAchievement(achievement));dispatch(addPoints(achievement.points));setClaimableAchievement(function(prevClaimableAchievements){return prevClaimableAchievements.filter(function(prevClaimableAchievement){return prevClaimableAchievement.id!==achievement.id;});});};if(!(profile===null||profile===void 0?void 0:profile.isActive)){return null;}if(claimableAchievements.length===0){return null;}var totalPointsToCollect=sumBy(claimableAchievements,'points');return/*#__PURE__*/_jsxs(Card,{isActive:true,mb:\"32px\",children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(Flex,{flexDirection:['column',null,'row'],justifyContent:['start',null,'space-between'],children:/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",mb:['16px',null,0],children:[/*#__PURE__*/_jsx(PrizeIcon,{width:\"32px\",mr:\"8px\"}),/*#__PURE__*/_jsx(Heading,{size:\"lg\",children:TranslateString(999,\"\".concat(totalPointsToCollect,\" Points to Collect\"),{num:totalPointsToCollect})})]})})}),/*#__PURE__*/_jsx(CardBody,{children:claimableAchievements.map(function(achievement){return/*#__PURE__*/_jsx(AchievementRow,{achievement:achievement,onCollectSuccess:handleCollectSuccess},achievement.address);})})]});};export default ClaimPointsCallout;","map":{"version":3,"sources":["D:/task159/frontend/src/views/Profile/components/ClaimPointsCallout .tsx"],"names":["React","useEffect","useState","sumBy","useAppDispatch","Card","CardBody","CardHeader","Flex","Heading","PrizeIcon","useWallet","useProfile","addPoints","addAchievement","useI18n","getClaimableIfoData","AchievementRow","ClaimPointsCallout","claimableAchievements","setClaimableAchievement","TranslateString","dispatch","profile","account","fetchIfoClaims","ifoData","handleCollectSuccess","achievement","points","prevClaimableAchievements","filter","prevClaimableAchievement","id","isActive","length","totalPointsToCollect","num","map","address"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { sumBy } from 'lodash'\nimport { useAppDispatch } from 'state'\nimport { useWeb3React } from '@web3-react/core'\nimport { Card, CardBody, CardHeader, Flex, Heading, PrizeIcon } from '@pancakeswap-libs/uikit'\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\nimport { useProfile } from 'state/hooks'\nimport { Achievement } from 'state/types'\nimport { addPoints } from 'state/profile'\nimport { addAchievement } from 'state/achievements'\nimport useI18n from 'hooks/useI18n'\nimport { getClaimableIfoData } from 'utils/achievements'\nimport AchievementRow from './AchievementRow'\n\n\nconst ClaimPointsCallout = () => {\n  const [claimableAchievements, setClaimableAchievement] = useState<Achievement[]>([])\n  const TranslateString = useI18n()\n  const dispatch = useAppDispatch()\n  const { profile } = useProfile()\n  const { account } = useWallet()\n\n  useEffect(() => {\n    const fetchIfoClaims = async () => {\n      const ifoData = await getClaimableIfoData(account)\n      setClaimableAchievement(ifoData)\n    }\n\n    if (account) {\n      fetchIfoClaims()\n    }\n  }, [account, dispatch, setClaimableAchievement])\n\n  const handleCollectSuccess = (achievement: Achievement) => {\n    dispatch(addAchievement(achievement))\n    dispatch(addPoints(achievement.points))\n\n    setClaimableAchievement((prevClaimableAchievements) =>\n      prevClaimableAchievements.filter((prevClaimableAchievement) => prevClaimableAchievement.id !== achievement.id),\n    )\n  }\n\n  if (!profile?.isActive) {\n    return null\n  }\n\n  if (claimableAchievements.length === 0) {\n    return null\n  }\n\n  const totalPointsToCollect = sumBy(claimableAchievements, 'points')\n\n  return (\n    <Card isActive mb=\"32px\">\n      <CardHeader>\n        <Flex flexDirection={['column', null, 'row']} justifyContent={['start', null, 'space-between']}>\n          <Flex alignItems=\"center\" mb={['16px', null, 0]}>\n            <PrizeIcon width=\"32px\" mr=\"8px\" />\n            <Heading size=\"lg\">\n              {TranslateString(999, `${totalPointsToCollect} Points to Collect`, { num: totalPointsToCollect })}\n            </Heading>\n          </Flex>\n        </Flex>\n      </CardHeader>\n      <CardBody>\n        {claimableAchievements.map((achievement) => (\n          <AchievementRow key={achievement.address} achievement={achievement} onCollectSuccess={handleCollectSuccess} />\n        ))}\n      </CardBody>\n    </Card>\n  )\n}\n\nexport default ClaimPointsCallout\n"]},"metadata":{},"sourceType":"module"}