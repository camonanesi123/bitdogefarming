{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\hexia\\\\Desktop\\\\pancake_fork\\\\frontend\\\\src\\\\views\\\\Ifos\\\\components\\\\IfoFoldableCard\\\\IfoPoolCard\\\\ContributeModal.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport { Modal, ModalBody, Text, Image, Button, BalanceInput, Flex } from '@pancakeswap-libs/uikit';\nimport { ethers } from 'ethers';\nimport { PoolIds } from 'config/constants/types';\nimport useI18n from 'hooks/useI18n';\nimport { getBalanceNumber, formatNumber } from 'utils/formatBalance';\nimport { getAddress } from 'utils/addressHelpers';\nimport ApproveConfirmButtons from 'views/Profile/components/ApproveConfirmButtons';\nimport useApproveConfirmTransaction from 'hooks/useApproveConfirmTransaction';\nimport { useERC20 } from 'hooks/useContract';\nimport { useWallet } from '@binance-chain/bsc-use-wallet';\nconst multiplierValues = [0.1, 0.25, 0.5, 0.75, 1];\n\nconst ContributeModal = ({\n  poolId,\n  ifo,\n  publicIfoData,\n  walletIfoData,\n  userCurrencyBalance,\n  onDismiss,\n  onSuccess\n}) => {\n  _s();\n\n  const publicPoolCharacteristics = publicIfoData[poolId];\n  const userPoolCharacteristics = walletIfoData[poolId];\n  const {\n    currency\n  } = ifo;\n  const {\n    limitPerUserInLP\n  } = publicPoolCharacteristics;\n  const {\n    amountTokenCommittedInLP\n  } = userPoolCharacteristics;\n  const {\n    contract\n  } = walletIfoData;\n  const [value, setValue] = useState(''); // const { account } = useWeb3React()\n\n  const {\n    account\n  } = useWallet();\n  const raisingTokenContract = useERC20(getAddress(currency.address));\n  const TranslateString = useI18n();\n  const valueWithTokenDecimals = new BigNumber(value).times(new BigNumber(10).pow(18));\n  const {\n    isApproving,\n    isApproved,\n    isConfirmed,\n    isConfirming,\n    handleApprove,\n    handleConfirm\n  } = useApproveConfirmTransaction({\n    onRequiresApproval: async () => {\n      try {\n        const response = await raisingTokenContract.methods.allowance(account, contract.options.address).call();\n        const currentAllowance = new BigNumber(response);\n        return currentAllowance.gt(0);\n      } catch (error) {\n        return false;\n      }\n    },\n    onApprove: () => {\n      return raisingTokenContract.methods.approve(contract.options.address, ethers.constants.MaxUint256).send({\n        from: account\n      });\n    },\n    onConfirm: () => {\n      return contract.methods.depositPool(valueWithTokenDecimals.toString(), poolId === PoolIds.poolBasic ? 0 : 1).send({\n        from: account\n      });\n    },\n    onSuccess: async () => {\n      onDismiss();\n      onSuccess(valueWithTokenDecimals);\n    }\n  });\n\n  const maximumLpCommitable = (() => {\n    if (limitPerUserInLP.isGreaterThan(0)) {\n      return limitPerUserInLP.minus(amountTokenCommittedInLP).isLessThanOrEqualTo(userCurrencyBalance) ? limitPerUserInLP : userCurrencyBalance;\n    }\n\n    return userCurrencyBalance;\n  })();\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    title: `Contribute ${currency.symbol}`,\n    onDismiss: onDismiss,\n    children: /*#__PURE__*/_jsxDEV(ModalBody, {\n      maxWidth: \"320px\",\n      children: [limitPerUserInLP.isGreaterThan(0) && /*#__PURE__*/_jsxDEV(Flex, {\n        justifyContent: \"space-between\",\n        mb: \"16px\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          children: TranslateString(999, 'Max. LP token entry')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          children: getBalanceNumber(limitPerUserInLP, currency.decimals)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        justifyContent: \"space-between\",\n        mb: \"8px\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          children: TranslateString(999, 'Commit:')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          flexGrow: 1,\n          justifyContent: \"flex-end\",\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            src: `/images/farms/${currency.symbol.split(' ')[0].toLocaleLowerCase()}.png`,\n            width: 24,\n            height: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            children: currency.symbol\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BalanceInput, {\n        value: value,\n        currencyValue: publicIfoData.currencyPriceInUSD.times(value || 0).toFixed(2),\n        onChange: e => setValue(e.currentTarget.value),\n        isWarning: valueWithTokenDecimals.isGreaterThan(maximumLpCommitable),\n        mb: \"8px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        color: \"textSubtle\",\n        textAlign: \"right\",\n        fontSize: \"12px\",\n        mb: \"16px\",\n        children: [\"Balance: \", formatNumber(getBalanceNumber(userCurrencyBalance, currency.decimals), 2, 5)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        justifyContent: \"space-between\",\n        mb: \"16px\",\n        children: multiplierValues.map((multiplierValue, index) => /*#__PURE__*/_jsxDEV(Button, {\n          scale: \"xs\",\n          variant: \"tertiary\",\n          onClick: () => setValue(getBalanceNumber(maximumLpCommitable.times(multiplierValue)).toString()),\n          mr: index < multiplierValues.length - 1 ? '8px' : 0,\n          children: TranslateString(999, `${multiplierValue * 100}%`)\n        }, multiplierValue, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        color: \"textSubtle\",\n        fontSize: \"12px\",\n        mb: \"24px\",\n        children: TranslateString(999, 'If you don’t commit enough LP tokens, you may not receive any IFO tokens at all and will only receive a full refund of your LP tokens.')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ApproveConfirmButtons, {\n        isApproveDisabled: isConfirmed || isConfirming || isApproved,\n        isApproving: isApproving,\n        isConfirmDisabled: !isApproved || isConfirmed || valueWithTokenDecimals.isNaN() || valueWithTokenDecimals.eq(0),\n        isConfirming: isConfirming,\n        onApprove: handleApprove,\n        onConfirm: handleConfirm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ContributeModal, \"QU5457bi78k8xR8OIbJFq4IJOBY=\", false, function () {\n  return [useWallet, useERC20, useI18n, useApproveConfirmTransaction];\n});\n\n_c = ContributeModal;\nexport default ContributeModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContributeModal\");","map":{"version":3,"sources":["C:/Users/hexia/Desktop/pancake_fork/frontend/src/views/Ifos/components/IfoFoldableCard/IfoPoolCard/ContributeModal.tsx"],"names":["React","useState","BigNumber","Modal","ModalBody","Text","Image","Button","BalanceInput","Flex","ethers","PoolIds","useI18n","getBalanceNumber","formatNumber","getAddress","ApproveConfirmButtons","useApproveConfirmTransaction","useERC20","useWallet","multiplierValues","ContributeModal","poolId","ifo","publicIfoData","walletIfoData","userCurrencyBalance","onDismiss","onSuccess","publicPoolCharacteristics","userPoolCharacteristics","currency","limitPerUserInLP","amountTokenCommittedInLP","contract","value","setValue","account","raisingTokenContract","address","TranslateString","valueWithTokenDecimals","times","pow","isApproving","isApproved","isConfirmed","isConfirming","handleApprove","handleConfirm","onRequiresApproval","response","methods","allowance","options","call","currentAllowance","gt","error","onApprove","approve","constants","MaxUint256","send","from","onConfirm","depositPool","toString","poolBasic","maximumLpCommitable","isGreaterThan","minus","isLessThanOrEqualTo","symbol","decimals","split","toLocaleLowerCase","currencyPriceInUSD","toFixed","e","currentTarget","map","multiplierValue","index","length","isNaN","eq"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport BigNumber from 'bignumber.js'\nimport { Modal, ModalBody, Text, Image, Button, BalanceInput, Flex } from '@pancakeswap-libs/uikit'\nimport { ethers } from 'ethers'\nimport { PoolIds, Ifo } from 'config/constants/types'\nimport { WalletIfoData, PublicIfoData } from 'hooks/ifo/types'\nimport useI18n from 'hooks/useI18n'\nimport { getBalanceNumber, formatNumber } from 'utils/formatBalance'\nimport { getAddress } from 'utils/addressHelpers'\nimport ApproveConfirmButtons from 'views/Profile/components/ApproveConfirmButtons'\nimport useApproveConfirmTransaction from 'hooks/useApproveConfirmTransaction'\nimport { useERC20 } from 'hooks/useContract'\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\n\ninterface Props {\n  poolId: PoolIds\n  ifo: Ifo\n  publicIfoData: PublicIfoData\n  walletIfoData: WalletIfoData\n  userCurrencyBalance: BigNumber\n  onSuccess: (amount: BigNumber) => void\n  onDismiss?: () => void\n}\n\nconst multiplierValues = [0.1, 0.25, 0.5, 0.75, 1]\n\nconst ContributeModal: React.FC<Props> = ({\n  poolId,\n  ifo,\n  publicIfoData,\n  walletIfoData,\n  userCurrencyBalance,\n  onDismiss,\n  onSuccess,\n}) => {\n  const publicPoolCharacteristics = publicIfoData[poolId]\n  const userPoolCharacteristics = walletIfoData[poolId]\n\n  const { currency } = ifo\n  const { limitPerUserInLP } = publicPoolCharacteristics\n  const { amountTokenCommittedInLP } = userPoolCharacteristics\n  const { contract } = walletIfoData\n  const [value, setValue] = useState('')\n  // const { account } = useWeb3React()\n  const { account } = useWallet()\n  const raisingTokenContract = useERC20(getAddress(currency.address))\n  const TranslateString = useI18n()\n  const valueWithTokenDecimals = new BigNumber(value).times(new BigNumber(10).pow(18))\n\n  const {\n    isApproving,\n    isApproved,\n    isConfirmed,\n    isConfirming,\n    handleApprove,\n    handleConfirm,\n  } = useApproveConfirmTransaction({\n    onRequiresApproval: async () => {\n      try {\n        const response = await raisingTokenContract.methods.allowance(account, contract.options.address).call()\n        const currentAllowance = new BigNumber(response)\n        return currentAllowance.gt(0)\n      } catch (error) {\n        return false\n      }\n    },\n    onApprove: () => {\n      return raisingTokenContract.methods\n        .approve(contract.options.address, ethers.constants.MaxUint256)\n        .send({ from: account })\n    },\n    onConfirm: () => {\n      return contract.methods\n        .depositPool(valueWithTokenDecimals.toString(), poolId === PoolIds.poolBasic ? 0 : 1)\n        .send({ from: account })\n    },\n    onSuccess: async () => {\n      onDismiss()\n      onSuccess(valueWithTokenDecimals)\n    },\n  })\n\n  const maximumLpCommitable = (() => {\n    if (limitPerUserInLP.isGreaterThan(0)) {\n      return limitPerUserInLP.minus(amountTokenCommittedInLP).isLessThanOrEqualTo(userCurrencyBalance)\n        ? limitPerUserInLP\n        : userCurrencyBalance\n    }\n    return userCurrencyBalance\n  })()\n\n  return (\n    <Modal title={`Contribute ${currency.symbol}`} onDismiss={onDismiss}>\n      <ModalBody maxWidth=\"320px\">\n        {limitPerUserInLP.isGreaterThan(0) && (\n          <Flex justifyContent=\"space-between\" mb=\"16px\">\n            <Text>{TranslateString(999, 'Max. LP token entry')}</Text>\n            <Text>{getBalanceNumber(limitPerUserInLP, currency.decimals)}</Text>\n          </Flex>\n        )}\n        <Flex justifyContent=\"space-between\" mb=\"8px\">\n          <Text>{TranslateString(999, 'Commit:')}</Text>\n          <Flex flexGrow={1} justifyContent=\"flex-end\">\n            <Image\n              src={`/images/farms/${currency.symbol.split(' ')[0].toLocaleLowerCase()}.png`}\n              width={24}\n              height={24}\n            />\n            <Text>{currency.symbol}</Text>\n          </Flex>\n        </Flex>\n        <BalanceInput\n          value={value}\n          currencyValue={publicIfoData.currencyPriceInUSD.times(value || 0).toFixed(2)}\n          onChange={(e) => setValue(e.currentTarget.value)}\n          isWarning={valueWithTokenDecimals.isGreaterThan(maximumLpCommitable)}\n          mb=\"8px\"\n        />\n        <Text color=\"textSubtle\" textAlign=\"right\" fontSize=\"12px\" mb=\"16px\">\n          Balance: {formatNumber(getBalanceNumber(userCurrencyBalance, currency.decimals), 2, 5)}\n        </Text>\n        <Flex justifyContent=\"space-between\" mb=\"16px\">\n          {multiplierValues.map((multiplierValue, index) => (\n            <Button\n              key={multiplierValue}\n              scale=\"xs\"\n              variant=\"tertiary\"\n              onClick={() => setValue(getBalanceNumber(maximumLpCommitable.times(multiplierValue)).toString())}\n              mr={index < multiplierValues.length - 1 ? '8px' : 0}\n            >\n              {TranslateString(999, `${multiplierValue * 100}%`)}\n            </Button>\n          ))}\n        </Flex>\n        <Text color=\"textSubtle\" fontSize=\"12px\" mb=\"24px\">\n          {TranslateString(\n            999,\n            'If you don’t commit enough LP tokens, you may not receive any IFO tokens at all and will only receive a full refund of your LP tokens.',\n          )}\n        </Text>\n        <ApproveConfirmButtons\n          isApproveDisabled={isConfirmed || isConfirming || isApproved}\n          isApproving={isApproving}\n          isConfirmDisabled={\n            !isApproved || isConfirmed || valueWithTokenDecimals.isNaN() || valueWithTokenDecimals.eq(0)\n          }\n          isConfirming={isConfirming}\n          onApprove={handleApprove}\n          onConfirm={handleConfirm}\n        />\n      </ModalBody>\n    </Modal>\n  )\n}\n\nexport default ContributeModal\n"]},"metadata":{},"sourceType":"module"}